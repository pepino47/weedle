<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weedle</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    h1 { text-align: center; }
    .logo { display:block; margin:auto; width:200px; }
    .game-container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
    .row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; padding: 6px 0; }
    .correct { background: #6aaa64; color: white; padding: 4px 6px; border-radius: 4px; }
    .close { background: #c9b458; color: white; padding: 4px 6px; border-radius: 4px; }
    .wrong { background: #787c7e; color: white; padding: 4px 6px; border-radius: 4px; }
    .guess-box { width: 100%; padding: 8px; margin-top: 10px; }
    button { width: 100%; padding: 10px; margin-top: 10px; background: #4caf50; border: none; color: white; cursor: pointer; border-radius: 6px; font-size: 16px; }
    button:hover { background: #45a049; }
    .result { margin-top: 20px; }
    .win { text-align:center; font-size:18px; margin-top:10px; color:#6aaa64; font-weight:bold; }
  </style>
</head>
<body>
  <img src="weedle.jpg" class="logo" alt="Weedle Logo" />
  <h1>Weedle</h1>
  <div class="game-container">
    <input list="strain-list" id="guessInput" class="guess-box" placeholder="Guess a strain..." />

    <datalist id="strain-list"></datalist>

    <button onclick="submitGuess()">Submit Guess</button>

    <div id="results" class="result"></div>
    <div id="winMsg" class="win"></div>
  </div>

  <script>
    const strains = [
      { name: "Blue Dream", type: "Hybrid", thc: 18, terp: "Myrcene", year: 2003 },
      { name: "OG Kush", type: "Indica", thc: 20, terp: "Limonene", year: 1996 },
      { name: "Sour Diesel", type: "Sativa", thc: 19, terp: "Caryophyllene", year: 1991 },
      { name: "Girl Scout Cookies", type: "Hybrid", thc: 21, terp: "Myrcene", year: 2012 }
    ];

    const strainList = document.getElementById("strain-list");
    const inputBox = document.getElementById("guessInput");

    function updateDropdown(letter) {
      strainList.innerHTML = "";
      if (!letter) return;
      letter = letter.toLowerCase();
      strains
        .filter(s => s.name.toLowerCase().includes(letter))
        .forEach(s => {
          const option = document.createElement("option");
          option.value = s.name;
          strainList.appendChild(option);
        });
    }

    inputBox.addEventListener("input", e => {
      updateDropdown(e.target.value.toLowerCase());
    });

    const correct = strains[Math.floor(Math.random() * strains.length)];

    function compare(value, correctValue) {
      if (value === correctValue) return "correct";
      const diff = Math.abs(value - correctValue);
      if (diff <= 1) return "close";
      return "wrong";
    }

    function arrow(value, correctValue) {
      if (value === correctValue) return "=";
      return value < correctValue ? "â†‘" : "â†“";
    }

    function submitGuess() {
      const guessName = inputBox.value.trim();
      const guess = strains.find(s => s.name.toLowerCase() === guessName.toLowerCase());

      if (!guess) {
        alert("Please select a strain from the list.");
        return;
      }

      const results = document.getElementById("results");
      const winMsg = document.getElementById("winMsg");
      results.innerHTML = "";
      winMsg.innerHTML = "";

      const letterCountGuess = guess.name.length;
      const letterCountCorrect = correct.name.length;

      const rows = [
        { label: "Strain", val: guess.name, correctVal: correct.name },
        { label: "Letters", val: `${letterCountGuess} letters`, correctVal: `${letterCountCorrect} letters`, numericVal: letterCountGuess, numericCorrect: letterCountCorrect },
        { label: "Type", val: guess.type, correctVal: correct.type },
        { label: "THC %", val: guess.thc, correctVal: correct.thc },
        { label: "Dominant Terpene", val: guess.terp, correctVal: correct.terp },
        { label: "Debut Year", val: guess.year, correctVal: correct.year }
      ];

      rows.forEach(r => {
        const row = document.createElement("div");
        row.className = "row";

        let state;

        if (r.label === "THC %" || r.label === "Debut Year") {
          state = compare(r.val, r.correctVal);
          row.innerHTML = `
            <span>${r.label}:</span>
            <span class="${state}">${r.val} ${arrow(r.val, r.correctVal)}</span>
          `;
        } else if (r.label === "Letters") {
          state = compare(r.numericVal, r.numericCorrect);
          row.innerHTML = `
            <span>${r.label}:</span>
            <span class="${state}">${r.val} ${arrow(r.numericVal, r.numericCorrect)}</span>
          `;
        } else {
          state = r.val === r.correctVal ? "correct" : "wrong";
          row.innerHTML = `
            <span>${r.label}:</span>
            <span class="${state}">${r.val}</span>
          `;
        }

        results.appendChild(row);
      });

      if (guess.name === correct.name) {
        winMsg.innerHTML = "ðŸŽ‰ You guessed the correct strain!";
      }
    }
  </script>
</body>
</html>
