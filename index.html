<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Weedle</title>
<style>
    body { font-family: Arial, sans-serif; background: #fafafa; margin: 0; padding: 20px; }

    #guessContainer { width: 350px; margin-bottom: 15px; }

    #guessInput {
        width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px;
        font-size: 16px; background: white;
    }

    #dropdown {
        width: 100%; border: 1px solid #ccc; border-top: none; border-radius: 0 0 6px 6px;
        background: white; max-height: 200px; overflow-y: auto; display: none;
        position: absolute; z-index: 1000;
    }

    .dropdown-item {
        padding: 10px; cursor: pointer;
    }
    .dropdown-item:hover { background: #eee; }

    table {
        width: 100%; border-collapse: collapse; margin-top: 20px; background: white;
    }
    th, td {
        padding: 10px; border-bottom: 1px solid #ccc; text-align: left;
        vertical-align: top;
    }
    th { background: #f0f0f0; }

    .green { color: green; font-weight: bold; }
    .red { color: red; font-weight: bold; }
</style>
</head>
<body>

<h2>Weedle</h2>

<div id="guessContainer">
    <input id="guessInput" type="text" placeholder="Guess a strain..." autocomplete="off">
    <div id="dropdown"></div>
</div>

<table id="resultsTable">
    <thead>
        <tr>
            <th>Strain</th>
            <th>Type</th>
            <th>THC %</th>
            <th>Terpene</th>
            <th>Year</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
/* ---- Sample strain list ---- */
const strains = [
    { name: "Blue Dream", type: "Hybrid", thc: 20, terpene: "Myrcene", year: 2011 },
    { name: "OG Kush", type: "Hybrid", thc: 22, terpene: "Limonene", year: 1996 },
    { name: "Green Crack", type: "Sativa", thc: 18, terpene: "Myrcene", year: 2012 },
    { name: "Gorilla Glue", type: "Hybrid", thc: 24, terpene: "Caryophyllene", year: 2013 }
];

/* ---- DOM elements ---- */
const input = document.getElementById("guessInput");
const dropdown = document.getElementById("dropdown");
const tableBody = document.querySelector("#resultsTable tbody");

/* ---- Helper: remove spaces before counting letters ---- */
function countLetters(str) {
    return str.replace(/\s+/g, "").length;
}

/* ---- Make dropdown match only names that START with typed text ---- */
input.addEventListener("input", () => {
    const val = input.value.toLowerCase().trim();
    dropdown.innerHTML = "";

    if (!val) {
        dropdown.style.display = "none";
        return;
    }

    const matches = strains.filter(s => s.name.toLowerCase().startsWith(val));

    if (matches.length === 0) {
        dropdown.style.display = "none";
        return;
    }

    matches.forEach(s => {
        const item = document.createElement("div");
        item.className = "dropdown-item";
        item.textContent = s.name;
        item.onclick = () => selectStrain(s);
        dropdown.appendChild(item);
    });

    dropdown.style.display = "block";
});

/* ---- When selecting a strain ---- */
function selectStrain(strain) {
    dropdown.style.display = "none";
    input.value = "";

    addRow(strain);
}

/* ---- Add horizontal row with combined “Strain + letters” column ---- */
function addRow(s) {
    const row = document.createElement("tr");

    const letterCount = countLetters(s.name);

    row.innerHTML = `
        <td>
            <strong>Strain:</strong><br>
            ${s.name} (${letterCount} letters ↑)
        </td>
        <td>${s.type}</td>
        <td>${s.thc}%</td>
        <td>${s.terpene}</td>
        <td>${s.year}</td>
    `;

    tableBody.appendChild(row);
}
</script>

</body>
</html>
