<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weedle</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    h1 { text-align: center; }
    .game-container { max-width: 500px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
    .row { display: flex; justify-content: space-between; padding: 8px 0; }
    .correct { background: #6aaa64; color: white; padding: 4px 6px; border-radius: 4px; }
    .close { background: #c9b458; color: white; padding: 4px 6px; border-radius: 4px; }
    .wrong { background: #787c7e; color: white; padding: 4px 6px; border-radius: 4px; }
    .guess-box { width: 100%; padding: 8px; margin-top: 10px; }
    button { width: 100%; padding: 10px; margin-top: 10px; background: #4caf50; border: none; color: white; cursor: pointer; border-radius: 6px; font-size: 16px; }
    button:hover { background: #45a049; }
    .result { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Weedle</h1>
  <div class="game-container">
    <input list="strain-list" id="guessInput" class="guess-box" placeholder="Guess a strain..." />

    <datalist id="strain-list"></datalist>

    <button onclick="submitGuess()">Submit Guess</button>

    <div id="results" class="result"></div>
  </div>

  <script>
    const strains = [
      { name: "Blue Dream", type: "Hybrid", thc: 18, terp: "Myrcene", year: 2003 },
      { name: "OG Kush", type: "Indica", thc: 20, terp: "Limonene", year: 1996 },
      { name: "Sour Diesel", type: "Sativa", thc: 19, terp: "Caryophyllene", year: 1991 },
      { name: "Girl Scout Cookies", type: "Hybrid", thc: 21, terp: "Myrcene", year: 2012 }
    ];

    const strainList = document.getElementById("strain-list");
    strains.forEach(s => {
      const option = document.createElement("option");
      option.value = s.name;
      strainList.appendChild(option);
    });

    const correct = strains[Math.floor(Math.random() * strains.length)];

    function compare(value, correctValue) {
      if (value === correctValue) return "correct";
      const diff = Math.abs(value - correctValue);
      if (diff < 3) return "close";
      return "wrong";
    }

    function arrow(value, correctValue) {
      if (value === correctValue) return "=";
      return value < correctValue ? "↑" : "↓";
    }

    function submitGuess() {
      const guessName = document.getElementById("guessInput").value.trim();
      const guess = strains.find(s => s.name.toLowerCase() === guessName.toLowerCase());

      if (!guess) {
        alert("Please select a strain from the list.");
        return;
      }

      const results = document.getElementById("results");
      results.innerHTML = "";

      const rows = [
        { label: "Strain", val: guess.name, correctVal: correct.name },
        { label: "Type", val: guess.type, correctVal: correct.type },
        { label: "THC %", val: guess.thc, correctVal: correct.thc },
        { label: "Dominant Terpene", val: guess.terp, correctVal: correct.terp },
        { label: "Debut Year", val: guess.year, correctVal: correct.year }
      ];

      rows.forEach(r => {
        const row = document.createElement("div");
        row.className = "row";

        let state;
        if (r.label === "THC %" || r.label === "Debut Year") {
          state = compare(r.val, r.correctVal);
          row.innerHTML = `
            <span>${r.label}:</span>
            <span class="${state}">${r.val} ${arrow(r.val, r.correctVal)}</span>
          `;
        } else {
          state = r.val === r.correctVal ? "correct" : "wrong";
          row.innerHTML = `
            <span>${r.label}:</span>
            <span class="${state}">${r.val}</span>
          `;
        }

        results.appendChild(row);
      });
    }
  </script>
</body>
</html>
